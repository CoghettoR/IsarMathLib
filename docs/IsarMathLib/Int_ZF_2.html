<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory Int_ZF_2 (Isabelle2019: June 2019)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory Int_ZF_2</h1>

<span class="command">theory</span> <span class="name">Int_ZF_2</span><br/>
<span class="keyword">imports</span> <a href="func_ZF_1.html"><span class="name">func_ZF_1</span></a> <a href="IntDiv_ZF_IML.html"><span class="name">IntDiv_ZF_IML</span></a> <a href="Group_ZF_3.html"><span class="name">Group_ZF_3</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*    This file is a part of IsarMathLib - 
    a library of formalized mathematics for Isabelle/Isar.

    Copyright (C) 2005 - 2009  Slawomir Kolodynski

    This program is free software; Redistribution and use in source and binary forms, 
    with or without modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, 
   this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright notice, 
   this list of conditions and the following disclaimer in the documentation and/or 
   other materials provided with the distribution.
   3. The name of the author may not be used to endorse or promote products 
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS&#39;&#39; AND ANY EXPRESS OR IMPLIED 
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR 
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, 
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Integers 2&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Int_ZF_2</span><span> </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>func_ZF_1</span><span> </span><span>Int_ZF_1</span><span> </span><span>IntDiv_ZF_IML</span><span> </span><span>Group_ZF_3</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;In this theory file we consider the properties of integers that are 
  needed for the real numbers construction in &#8249;Real_ZF&#8250; series.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Slopes&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;In this section we study basic properties of slopes - the integer 
  almost homomorphisms. 
  The general definition of an almost homomorphism $f$ on a group $G$ 
  written in additive notation requires the set 
  $\{f(m+n) - f(m) - f(n): m,n\in G\}$ to be finite.
  In this section we establish a definition that is equivalent for integers: 
  that for all integer $m,n$ we have $|f(m+n) - f(m) - f(n)| \leq L$ for
  some $L$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;First we extend the standard notation for integers with notation related
  to slopes. We define slopes as almost homomorphisms on the additive group of
  integers. The set of slopes is denoted &#8249;&#119982;&#8250;. We also define &quot;positive&quot; 
  slopes as those that take infinite number of positive values on positive integers.
  We write &#8249;&#948;(s,m,n)&#8250; to denote the homomorphism 
  difference of $s$ at $m,n$ (i.e the expression $s(m+n) - s(m) - s(n)$).
  We denote &#8249;max&#948;(s)&#8250; the maximum absolute value of homomorphism 
  difference of $s$ as $m,n$ range over integers.
  If $s$ is a slope, 
  then the set of homomorphism differences is finite and 
  this maximum exists.
  In &#8249;Group_ZF_3&#8250; we define the equivalence relation on 
  almost homomorphisms using the notion of a quotient group relation
  and use &quot;&#8249;&#8776;&#8250;&quot; to denote it. As here this symbol seems to be hogged
  by the standard Isabelle, we will use &quot;&#8249;&#8764;&#8250;&quot; instead &quot;&#8249;&#8776;&#8250;&quot;.
  We show in this section that $s\sim r$ iff for some $L$ we 
  have $|s(m)-r(m)| \leq L$ for all integer $m$.
  The &quot;&#8249;\&lt;fp&gt;&#8250;&quot; denotes the first operation on almost homomorphisms. 
  For slopes this is addition of functions defined in the natural way.
  The &quot;&#8249;&#8728;&#8250;&quot; symbol denotes the second operation on almost homomorphisms
  (see &#8249;Group_ZF_3&#8250; for definition), 
  defined for the group of integers.  In short &quot;&#8249;&#8728;&#8250;&quot; 
  is the composition of slopes.
  The &quot;&#8249;&#175;&#8250;&quot; symbol acts as an infix operator that assigns the value 
  $\min\{n\in Z_+: p\leq f(n)\}$ to a pair (of sets) $f$ and $p$. 
  In application
  $f$ represents a function defined on $Z_+$ and $p$ is a positive integer.
  We choose this notation because we use it to construct the right inverse 
  in the ring of classes of slopes and show that this ring is in fact a field.
  To study the homomorphism difference of the function defined by $p\mapsto f^{-1}(p)$
  we introduce the symbol &#8249;&#949;&#8250; defined as 
  $\varepsilon(f,\langle m,n \rangle ) = f^{-1}(m+n)-f^{-1}(m)-f^{-1}(n)$. Of course the intention is
  to use the fact that $\varepsilon(f,\langle m,n \rangle )$ is the homomorphism difference
  of the function $g$ defined as $g(m) = f^{-1}(m)$. We also define $\gamma (s,m,n)$ as the 
  expression $\delta(f,m,-n)+s(0)-\delta (f,n,-n)$. This is useful because of the identity 
  $f(m-n) = \gamma (m,n) + f(m)-f(n)$ that allows to obtain bounds on the value of a slope
  at the difference of of two integers.
  For every integer $m$ we introduce notation $m^S$ defined by $m^E(n)=m\cdot n$. The mapping
  $q\mapsto q^S$ embeds integers into &#8249;&#119982;&#8250; preserving the order, (that is, 
  maps positive integers into &#8249;&#119982;<span class="hidden">&#8681;</span><sub>+</sub>&#8250;).&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>int1</span><span> </span><span class="delimiter">=</span><span> </span><span>int0</span><span> </span><span class="delimiter">+</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>slopes</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;&#119982;&quot;</span></span></span><span> </span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>slopes_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#119982; &#8801; AlmostHoms(&#8484;,IntegerAddition)&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>posslopes</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;&#119982;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>posslopes_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#119982;<span class="hidden">&#8681;</span><sub>+</sub> &#8801; {s&#8712;&#119982;. s``(&#8484;<span class="hidden">&#8681;</span><sub>+</sub>) &#8745; &#8484;<span class="hidden">&#8681;</span><sub>+</sub> &#8713; Fin(&#8484;)}&quot;</span></span></span><span>
</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>&#948;</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>&#948;_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(s,m,n) &#8801; s`(m\&lt;ra&gt;n)\&lt;rs&gt;s`(m)\&lt;rs&gt;s`(n)&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>maxhomdiff</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;&quot;</span></span></span><span> </span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>maxhomdiff_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(s) &#8801; Maximum(IntegerOrder,{abs(&#948;(s,m,n)). &#10216; m,n&#10217; &#8712; &#8484;&#215;&#8484;})&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>AlEqRel</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>AlEqRel_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;AlEqRel &#8801; QuotientGroupRel(&#119982;,AlHomOp1(&#8484;,IntegerAddition),FinRangeFunctions(&#8484;,&#8484;))&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>AlEq</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infix</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8764;&quot;</span></span></span><span> </span><span>68</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>AlEq_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r &#8801; &#10216; s,r&#10217; &#8712; AlEqRel&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>slope_add</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infix</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;\&lt;fp&gt;&quot;</span></span></span><span> </span><span>70</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>slope_add_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s \&lt;fp&gt; r &#8801;  AlHomOp1(&#8484;,IntegerAddition)`&#10216; s,r&#10217;&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>slope_comp</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infix</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8728;&quot;</span></span></span><span> </span><span>70</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>slope_comp_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8728; r &#8801;  AlHomOp2(&#8484;,IntegerAddition)`&#10216; s,r&#10217;&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>neg</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;\&lt;fm&gt;_&quot;</span></span></span><span> </span><span class="delimiter">[</span><span>90</span><span class="delimiter">]</span><span> </span><span>91</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>neg_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;\&lt;fm&gt;s &#8801; GroupInv(&#8484;,IntegerAddition) O s&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>slope_inv</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infix</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#175;&quot;</span></span></span><span> </span><span>71</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>slope_inv_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f&#175;(p) &#8801; Minimum(IntegerOrder,{n&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. p \&lt;lsq&gt; f`(n)})&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>&#949;</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>&#949;_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#949;(f,p) &#8801; f&#175;(fst(p)\&lt;ra&gt;snd(p)) \&lt;rs&gt; f&#175;(fst(p)) \&lt;rs&gt; f&#175;(snd(p))&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>&#947;</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>&#947;_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(s,m,n) &#8801; &#948;(s,m,\&lt;rm&gt;n) \&lt;rs&gt; &#948;(s,n,\&lt;rm&gt;n) \&lt;ra&gt; s`(&#120812;)&quot;</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>intembed</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;_<span class="hidden">&#8679;</span><sup>S</sup>&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span>intembed_def</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m<span class="hidden">&#8679;</span><sup>S</sup> &#8801; {&#10216;n,m&#8901;n&#10217;. n&#8712;&#8484;}&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;We can use theorems proven in the &#8249;group1&#8250; context.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L1</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;group1(&#8484;,IntegerAddition)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_T2</span><span> </span><span>group1_axioms.intro</span><span> </span><span>group1_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Type information related to the homomorphism difference expression.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L2</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;m\&lt;ra&gt;n &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;f`(n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) \&lt;ra&gt; f`(n) &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;HomDiff(&#8484;,IntegerAddition,f,&#10216; m,n&#10217;) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_2_L4A</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Type information related to the homomorphism difference expression.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L2A</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;m\&lt;ra&gt;n &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;f`(n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) \&lt;ra&gt; f`(n) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;HomDiff(&#8484;,IntegerAddition,f,&#10216; m,n&#10217;) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_2_L4</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Slopes map integers into integers.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L2B</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>AlmostHoms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>apply_funtype</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;The homomorphism difference in multiplicative notation is defined as
  the expression $s(m\cdot n)\cdot(s(m)\cdot s(n))^{-1}$. The next lemma 
  shows that 
  in the additive notation used for integers the homomorphism 
  difference is $f(m+n) - f(m) - f(n)$ which we denote as &#8249;&#948;(f,m,n)&#8250;.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L3</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;HomDiff(&#8484;,IntegerAddition,f,&#10216; m,n&#10217;) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L2A</span><span> </span><span>Int_ZF_1_T2</span><span> </span><span>group0.group0_4_L4A</span><span> 
</span><span>    </span><span>HomDiff_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;The next formula restates the definition of the homomorphism 
  difference to express the value an almost homomorphism on a sum.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L3A</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) = f`(m)\&lt;ra&gt;(f`(n)\&lt;ra&gt;&#948;(f,m,n))&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span>T</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m)&#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,n) &#8712; &#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;HomDiff(&#8484;,IntegerAddition,f,&#10216; m,n&#10217;) = &#948;(f,m,n)&quot;</span></span></span><span>  
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L2</span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_2_1_L3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) = f`(m)\&lt;ra&gt;(f`(n)\&lt;ra&gt;&#948;(f,m,n))&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L3</span><span> </span><span>Int_ZF_1_L3</span><span> 
</span><span>      </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_4_L1</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;The homomorphism difference of any integer function is integer.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L3B</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L2A</span><span> </span><span>Int_ZF_2_1_L3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;The value of an integer function at a sum expressed in 
  terms of &#8249;&#948;&#8250;.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L3C</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) = &#948;(f,m,n) \&lt;ra&gt; f`(n) \&lt;ra&gt; f`(m)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>apply_funtype</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) = &#948;(f,m,n) \&lt;ra&gt; f`(n) \&lt;ra&gt; f`(m)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L15</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;The next lemma presents two ways the set of homomorphism differences
  can be written.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L4</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;{abs(HomDiff(&#8484;,IntegerAddition,f,x)). x &#8712; &#8484;&#215;&#8484;} =
  {abs(&#948;(f,m,n)). &#10216; m,n&#10217; &#8712; &#8484;&#215;&#8484;}&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;. &#8704;n&#8712;&#8484;. 
    abs(HomDiff(&#8484;,IntegerAddition,f,&#10216; m,n&#10217;)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ZF1_1_L4A</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $f$ maps integers into integers and 
  for all $m,n\in Z$ we have $|f(m+n) - f(m) - f(n)| \leq L$ for some $L$,
  then $f$ is a slope.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L5</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;. abs(&#948;(f,m,n)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?Abs</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;AbsoluteValue(&#8484;,IntegerAddition,IntegerOrder)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;group3(&#8484;,IntegerAddition,IntegerOrder)&quot;</span></span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;IntegerOrder {is total on} &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_T1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;x&#8712;&#8484;&#215;&#8484;. HomDiff(&#8484;,IntegerAddition,f,x) &#8712; &#8484; &#8743;
    &#10216;?Abs`(HomDiff(&#8484;,IntegerAddition,f,x)),L &#10217; &#8712; IntegerOrder&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L2A</span><span> </span><span>Int_ZF_2_1_L3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;IsBounded({HomDiff(&#8484;,IntegerAddition,f,x). x&#8712;&#8484;&#215;&#8484;},IntegerOrder)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>group3.OrderedGroup_ZF_3_L9A</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f &#8712; &#119982;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_bounded_iff_fin</span><span> </span><span>AlmostHoms_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;The absolute value of homomorphism difference 
  of a slope $s$ does not exceed &#8249;max&#948;(s)&#8250;.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L7</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(s,m,n)) \&lt;lsq&gt; max&#948;(s)&quot;</span></span></span><span>   
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(s,m,n) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(s) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;max&#948;(s)) \&lt;lsq&gt; &#948;(s,m,n)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(s,m,n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L2</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?A</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;{abs(HomDiff(&#8484;,IntegerAddition,s,x)). x&#8712;&#8484;&#215;&#8484;}&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?B</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;{abs(&#948;(s,m,n)). &#10216; m,n&#10217; &#8712; &#8484;&#215;&#8484;}&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?d</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(s,m,n))&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;IsLinOrder(&#8484;,IntegerOrder)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_T1</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?A &#8712; Fin(&#8484;)&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;k&#8712;&#8484;. abs(k) &#8712; &#8484;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L14</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;{HomDiff(&#8484;,IntegerAddition,s,x). x &#8712; &#8484;&#215;&#8484;} &#8712; Fin(&#8484;)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>AlmostHoms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?A &#8712; Fin(&#8484;)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Finite1_L6C</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?A&#8800;0&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;k&#8712;?A. &#10216;k,Maximum(IntegerOrder,?A)&#10217; &#8712; IntegerOrder&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Finite_ZF_1_T2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?d&#8712;?A&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_2_1_L4</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?d \&lt;lsq&gt; Maximum(IntegerOrder,?A)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> 
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?d \&lt;lsq&gt; max&#948;(s)&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(s) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_2_1_L4</span><span> </span><span>Int_ZF_2_L1A</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;max&#948;(s)) \&lt;lsq&gt; &#948;(s,m,n)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_3_L19</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;A useful estimate for the value of a slope at $0$, plus some type information
  for slopes.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L8</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) \&lt;lsq&gt; max&#948;(s)&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812; \&lt;lsq&gt; max&#948;(s)&quot;</span></span></span><span>  
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(s) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) \&lt;ra&gt; max&#948;(s) &#8712; &#8484;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812; \&lt;lsq&gt; abs(s`(&#120812;))&quot;</span></span></span><span>  
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(s,&#120812;,&#120812;)) = abs(s`(&#120812;))&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_abs_nonneg</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_1_1_L4</span><span> 
</span><span>      </span><span>Int_ZF_2_L17</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(s,&#120812;,&#120812;)) \&lt;lsq&gt; max&#948;(s)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_2_1_L7</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>II</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) \&lt;lsq&gt; max&#948;(s)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;\&lt;lsq&gt;max&#948;(s)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>II</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(s) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) \&lt;ra&gt; max&#948;(s) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L1A</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Int &#8249;Group_ZF_3.thy&#8250; we show that finite range functions 
  valued in an abelian group 
  form a normal subgroup of almost homomorphisms. 
  This allows to define the equivalence relation 
  between almost homomorphisms as the relation resulting from dividing 
  by that normal subgroup. 
  Then we show in &#8249;Group_ZF_3_4_L12&#8250; that if the difference of $f$ and $g$ 
  has finite range (actually $f(n)\cdot g(n)^{-1}$ as we use multiplicative 
  notation 
  in &#8249;Group_ZF_3.thy&#8250;), then $f$ and $g$ are equivalent.
  The next lemma translates that fact into the notation used in &#8249;int1&#8250; 
  context.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L9</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;. abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;. s`(m)\&lt;rs&gt;r`(m) &#8712; &#8484; &#8743; abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;IsBounded({s`(n)\&lt;rs&gt;r`(n). n&#8712;&#8484;}, IntegerOrder)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_1_3_L20</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_bounded_iff_fin</span><span> 
</span><span>    </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_4_L12</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;A neccessary condition for two slopes to be almost equal. 
  For slopes the definition postulates the 
  set $\{f(m)-g(m): m\in Z\}$ to be finite. 
  This lemma shows that this implies that
  $|f(m)-g(m)|$ is bounded (by some integer) as $m$ varies over integers.
  We also mention here that in this context &#8249;s &#8764; r&#8250; implies that both
  $s$ and $r$ are slopes.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L9A</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;L&#8712;&#8484;. &#8704;m&#8712;&#8484;. abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_4_L11</span><span> 
</span><span>    </span><span>Int_ZF_1_3_L20AA</span><span> </span><span>QuotientGroupRel_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Let&#39;s recall that the relation of almost equality is an equivalence relation
  on the set of slopes.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L9B</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">shows</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;AlEqRel &#8838; &#119982;&#215;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;equiv(&#119982;,AlEqRel)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_3_L3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Another version of sufficient condition for two slopes to be almost
  equal: if the difference of two slopes is a finite range function, then
  they are almost equal.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L9C</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s \&lt;fp&gt; (\&lt;fm&gt;r) &#8712; FinRangeFunctions(&#8484;,&#8484;)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span>  
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span>  
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r &#8764; s&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> 
</span><span>    </span><span>group1.Group_ZF_3_2_L13</span><span> </span><span>group1.Group_ZF_3_4_L12A</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If two slopes are almost equal, then the difference has finite range.
  This is the inverse of &#8249;Int_ZF_2_1_L9C&#8250;.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L9D</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s \&lt;fp&gt; (\&lt;fm&gt;r) &#8712; FinRangeFunctions(&#8484;,&#8484;)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?G</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?f</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;IntegerAddition&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;AlHomOp1(?G, ?f)`&#10216;s,GroupInv(AlmostHoms(?G, ?f),AlHomOp1(?G, ?f))`(r)&#10217; 
    &#8712; FinRangeFunctions(?G, ?G)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_4_L12B</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s \&lt;fp&gt; (\&lt;fm&gt;r) &#8712; FinRangeFunctions(&#8484;,&#8484;)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L9A</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_2_L13</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;What is the value of a composition of slopes?&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L10</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s&#8728;r)`(m) = s`(r`(m))&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s`(r`(m)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_4_L2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Composition of slopes is a slope.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L11</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8728;r &#8712; &#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_4_T1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Negative of a slope is a slope.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L12</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;\&lt;fm&gt;s &#8712; &#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_1_T2</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_2_L13</span><span> 
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;What is the value of a negative of a slope?&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L12A</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;fm&gt;s)`(m) = \&lt;rm&gt;(s`(m))&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_2_L5</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;What are the values of a sum of slopes?&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L12B</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s\&lt;fp&gt;r)`(m) = s`(m) \&lt;ra&gt; r`(m)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_2_L12</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Sum of slopes is a slope.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L12C</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s\&lt;fp&gt;r &#8712; &#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_2_L16</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;A simple but useful identity.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L13</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(n&#8901;m) \&lt;ra&gt; (s`(m) \&lt;ra&gt; &#948;(s,n&#8901;m,m)) = s`((n\&lt;ra&gt;&#120813;)&#8901;m)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_1_2_L9</span><span> </span><span>Int_ZF_1_2_L7</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Some estimates for the absolute value of a slope at the opposite 
  integer.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L14</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s`(\&lt;rm&gt;m) = s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m) \&lt;rs&gt; s`(m)&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)\&lt;ra&gt;s`(\&lt;rm&gt;m)) \&lt;lsq&gt; &#120814;&#8901;max&#948;(s)&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(\&lt;rm&gt;m)) \&lt;lsq&gt; &#120814;&#8901;max&#948;(s) \&lt;ra&gt; abs(s`(m))&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s`(\&lt;rm&gt;m) \&lt;lsq&gt; abs(s`(&#120812;)) \&lt;ra&gt; max&#948;(s) \&lt;rs&gt; s`(m)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(s,m,\&lt;rm&gt;m) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;s`(\&lt;rm&gt;m) &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;(s`(m))) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_2_L14</span><span> </span><span>Int_ZF_2_1_L2</span><span> 
</span><span>      </span><span>Int_ZF_1_1_L5</span><span> </span><span>int_zero_one_are_int</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(\&lt;rm&gt;m) = s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m) \&lt;rs&gt; s`(m)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_1_2_L15</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m)) \&lt;lsq&gt; abs(s`(&#120812;)) \&lt;ra&gt; abs(&#948;(s,m,\&lt;rm&gt;m))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_triangle_ineq1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) \&lt;ra&gt; abs(&#948;(s,m,\&lt;rm&gt;m)) \&lt;lsq&gt;  &#120814;&#8901;max&#948;(s)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L7</span><span> </span><span>Int_ZF_2_1_L8</span><span> </span><span>Int_ZF_1_3_L21</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m)) \&lt;lsq&gt; &#120814;&#8901;max&#948;(s)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m) \&lt;ra&gt; s`(\&lt;rm&gt;m) = s`(m) \&lt;ra&gt; (s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m) \&lt;rs&gt; s`(m))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m) \&lt;ra&gt; s`(\&lt;rm&gt;m)) = abs(s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)\&lt;ra&gt;s`(\&lt;rm&gt;m)) \&lt;lsq&gt; &#120814;&#8901;max&#948;(s)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(\&lt;rm&gt;m)) = abs(s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m) \&lt;rs&gt; s`(m))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(\&lt;rm&gt;m)) \&lt;lsq&gt; abs(s`(&#120812;)) \&lt;ra&gt; abs(&#948;(s,m,\&lt;rm&gt;m)) \&lt;ra&gt; abs(s`(m))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_triangle_ineq3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) \&lt;ra&gt; abs(&#948;(s,m,\&lt;rm&gt;m)) \&lt;ra&gt; abs(s`(m)) \&lt;lsq&gt; &#120814;&#8901;max&#948;(s) \&lt;ra&gt; abs(s`(m))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L7</span><span> </span><span>Int_ZF_2_1_L8</span><span> </span><span>Int_ZF_1_3_L21</span><span> </span><span>int_ord_transl_inv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(\&lt;rm&gt;m)) \&lt;lsq&gt; &#120814;&#8901;max&#948;(s) \&lt;ra&gt; abs(s`(m))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m) \&lt;lsq&gt; abs(s`(&#120812;)) \&lt;ra&gt; abs(&#948;(s,m,\&lt;rm&gt;m))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L15E</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) \&lt;ra&gt; abs(&#948;(s,m,\&lt;rm&gt;m)) \&lt;lsq&gt; abs(s`(&#120812;)) \&lt;ra&gt; max&#948;(s)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L7</span><span> </span><span>int_ord_transl_inv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m) \&lt;lsq&gt; abs(s`(&#120812;)) \&lt;ra&gt; max&#948;(s)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120812;) \&lt;rs&gt; &#948;(s,m,\&lt;rm&gt;m) \&lt;rs&gt; s`(m) \&lt;lsq&gt; abs(s`(&#120812;)) \&lt;ra&gt; max&#948;(s) \&lt;rs&gt; s`(m)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_ord_transl_inv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(\&lt;rm&gt;m) \&lt;lsq&gt; abs(s`(&#120812;)) \&lt;ra&gt; max&#948;(s) \&lt;rs&gt; s`(m)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;An identity that expresses the value of an integer function at the opposite
  integer in terms of the value of that function at the integer, zero, and the 
  homomorphism difference. We have a similar identity in &#8249;Int_ZF_2_1_L14&#8250;, but
  over there we assume that $f$ is a slope.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L14A</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(\&lt;rm&gt;m) = (\&lt;rm&gt;&#948;(f,m,\&lt;rm&gt;m)) \&lt;ra&gt; f`(&#120812;) \&lt;rs&gt; f`(m)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(\&lt;rm&gt;m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,\&lt;rm&gt;m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>apply_funtype</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>   </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(\&lt;rm&gt;m) = (\&lt;rm&gt;&#948;(f,m,\&lt;rm&gt;m)) \&lt;ra&gt; f`(&#120812;) \&lt;rs&gt; f`(m)&quot;</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_1_2_L15</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;The next lemma allows to use the expression &#8249;maxf(f,&#120812;..M-1)&#8250;. 
  Recall that &#8249;maxf(f,A)&#8250; is the maximum of (function) $f$ on 
  (the set) $A$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L15</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;M &#8712; &#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;maxf(s,&#120812;..(M\&lt;rs&gt;&#120813;)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;n &#8712; &#120812;..(M\&lt;rs&gt;&#120813;). s`(n) \&lt;lsq&gt; maxf(s,&#120812;..(M\&lt;rs&gt;&#120813;))&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;minf(s,&#120812;..(M\&lt;rs&gt;&#120813;)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;n &#8712; &#120812;..(M\&lt;rs&gt;&#120813;). minf(s,&#120812;..(M\&lt;rs&gt;&#120813;)) \&lt;lsq&gt; s`(n)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_1_5_L6</span><span> </span><span>Int_ZF_1_4_L2</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;A lower estimate for the value of a slope at $nM+k$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L16</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;M &#8712; &#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;k &#8712; &#120812;..(M\&lt;rs&gt;&#120813;)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m&#8901;M) \&lt;ra&gt; (minf(s,&#120812;..(M\&lt;rs&gt;&#120813;))\&lt;rs&gt; max&#948;(s)) \&lt;lsq&gt; s`(m&#8901;M\&lt;ra&gt;k)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;..(M\&lt;rs&gt;&#120813;) &#8838; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_5_L6</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>A3</span><span> </span><span>A4</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8901;M &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;k &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m&#8901;M) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>PositiveSet_def</span><span> </span><span>Int_ZF_1_1_L5</span><span>  </span><span>Int_ZF_2_1_L2B</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A3</span><span> </span><span>A4</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m&#8901;M) \&lt;ra&gt; (minf(s,&#120812;..(M\&lt;rs&gt;&#120813;)) \&lt;rs&gt; max&#948;(s)) \&lt;lsq&gt; s`(m&#8901;M) \&lt;ra&gt; (s`(k) \&lt;ra&gt; &#948;(s,m&#8901;M,k))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L15</span><span> </span><span>Int_ZF_2_1_L7</span><span> </span><span>int_ineq_add_sides</span><span> </span><span>int_ord_transl_inv</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>T</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L3A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Identity is a slope.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L17</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;id(&#8484;) &#8712; &#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span>group1.Group_ZF_3_4_L15</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Simple identities about (absolute value of) homomorphism differences.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L18</span><span class="delimiter">:</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(n) \&lt;ra&gt; f`(m) \&lt;rs&gt; f`(m\&lt;ra&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(m) \&lt;ra&gt; f`(n) \&lt;rs&gt; f`(m\&lt;ra&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;(f`(m))) \&lt;rs&gt; f`(n) \&lt;ra&gt; f`(m\&lt;ra&gt;n) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;(f`(n))) \&lt;rs&gt; f`(m) \&lt;ra&gt; f`(m\&lt;ra&gt;n) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs((\&lt;rm&gt;f`(m\&lt;ra&gt;n)) \&lt;ra&gt; f`(m) \&lt;ra&gt; f`(n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;ra&gt;n) \&lt;rs&gt; f`(m) \&lt;rs&gt;  f`(n)  &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;(f`(m))) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;f`(m\&lt;ra&gt;n)) \&lt;ra&gt; f`(m) \&lt;ra&gt; f`(n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>apply_funtype</span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(\&lt;rm&gt;(f`(m\&lt;ra&gt;n) \&lt;rs&gt; f`(m) \&lt;rs&gt;  f`(n))) = abs(f`(m\&lt;ra&gt;n) \&lt;rs&gt; f`(m) \&lt;rs&gt;  f`(n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L17</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;(f`(m\&lt;ra&gt;n) \&lt;rs&gt; f`(m) \&lt;rs&gt;  f`(n))) = f`(n) \&lt;ra&gt; f`(m) \&lt;rs&gt; f`(m\&lt;ra&gt;n)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L9A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(n) \&lt;ra&gt; f`(m) \&lt;rs&gt; f`(m\&lt;ra&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(n) \&lt;ra&gt; f`(m) = f`(m) \&lt;ra&gt; f`(n)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(m) \&lt;ra&gt; f`(n) \&lt;rs&gt; f`(m\&lt;ra&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;(f`(m))) \&lt;rs&gt; f`(n) \&lt;ra&gt; f`(m\&lt;ra&gt;n) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;(f`(n))) \&lt;rs&gt; f`(m) \&lt;ra&gt; f`(m\&lt;ra&gt;n) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L9</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs((\&lt;rm&gt;f`(m\&lt;ra&gt;n)) \&lt;ra&gt; f`(m) \&lt;ra&gt; f`(n)) =
    abs(\&lt;rm&gt;((\&lt;rm&gt;f`(m\&lt;ra&gt;n)) \&lt;ra&gt; f`(m) \&lt;ra&gt; f`(n)))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L17</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(\&lt;rm&gt;((\&lt;rm&gt;f`(m\&lt;ra&gt;n)) \&lt;ra&gt; f`(m) \&lt;ra&gt; f`(n))) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L9</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs((\&lt;rm&gt;f`(m\&lt;ra&gt;n)) \&lt;ra&gt; f`(m) \&lt;ra&gt; f`(n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Some identities about the homomorphism difference of odd functions.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L19</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;x&#8712;&#8484;. (\&lt;rm&gt;f`(\&lt;rm&gt;x)) = f`(x)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;m,m\&lt;ra&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;n,m\&lt;ra&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,n,\&lt;rm&gt;(m\&lt;ra&gt;n)) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,\&lt;rm&gt;(m\&lt;ra&gt;n)) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;m,\&lt;rm&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>A3</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;m,m\&lt;ra&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;n,m\&lt;ra&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L3</span><span> </span><span>Int_ZF_2_1_L18</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m\&lt;ra&gt;n &#8712; &#8484;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;x&#8712;&#8484;. f`(\&lt;rm&gt;x) = (\&lt;rm&gt;f`(x))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_5_L13</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>A3</span><span> </span><span>T</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,n,\&lt;rm&gt;(m\&lt;ra&gt;n)) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,\&lt;rm&gt;(m\&lt;ra&gt;n)) = &#948;(f,m,n)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L3</span><span> </span><span>Int_ZF_2_1_L18</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;m,\&lt;rm&gt;n)) = abs(f`(\&lt;rm&gt;(m\&lt;ra&gt;n)) \&lt;rs&gt; f`(\&lt;rm&gt;m) \&lt;rs&gt; f`(\&lt;rm&gt;n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>A3</span><span> </span><span>T</span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8230; = abs(&#948;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L18</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;m,\&lt;rm&gt;n)) = abs(&#948;(f,m,n))&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Recall that $f$ is a slope iff $f(m+n)-f(m)-f(n)$ is bounded
  as $m,n$ ranges over integers. The next lemma is the first 
  step in showing that we only need to check this condition as $m,n$ ranges
  over positive intergers. Namely we show that if the condition holds for
  positive integers, then it holds if one integer is positive and the second 
  one is nonnegative.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L20</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>  </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. &#8704;b&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. abs(&#948;(f,a,b)) \&lt;lsq&gt; L&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>  </span><span>A3</span><span class="delimiter">:</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812; \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>       
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,&#120813;,&#120813;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,&#120813;,&#120813;)) \&lt;lsq&gt; L&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_one_two_are_pos</span><span> </span><span>PositiveSet_def</span><span> </span><span>Int_ZF_2_1_L3B</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812; \&lt;lsq&gt; L&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_3_L19</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;n &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>PositiveSet_def</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>apply_funtype</span><span>
</span><span>      </span><span>Nonnegative_def</span><span> </span><span>Int_ZF_2_1_L3B</span><span> </span><span>Int_ZF_2_L14</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m=&#120812; &#8744; m&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_5_L3A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m = &#120812;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_1_2_L3</span><span> </span><span>Int_ZF_2_L17</span><span> 
</span><span>	</span><span>int_ord_is_refl</span><span> </span><span>refl_def</span><span> </span><span>Int_ZF_2_L15F</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span>A3</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_abs_nonneg</span><span> </span><span>Int_ZF_2_L15F</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>   </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If the slope condition holds for all pairs of integers such that one integer is 
  positive and the second one is nonnegative, then it holds when both integers are 
  nonnegative.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L21</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>  </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. &#8704;b&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. abs(&#948;(f,a,b)) \&lt;lsq&gt; L&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>  </span><span>A3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,&#120813;,&#120813;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,&#120813;,&#120813;)) \&lt;lsq&gt; L&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_one_two_are_pos</span><span> </span><span>PositiveSet_def</span><span> </span><span>Nonnegative_def</span><span> </span><span>Int_ZF_2_1_L3B</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812; \&lt;lsq&gt; L&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_3_L19</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;m &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;f`(&#120812;)) &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>apply_funtype</span><span> </span><span>Nonnegative_def</span><span> 
</span><span>      </span><span>Int_ZF_2_1_L3B</span><span> </span><span>Int_ZF_2_L14</span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;n=&#120812; &#8744; n&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_5_L3A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;n=&#120812;&quot;</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,n) = \&lt;rm&gt;f`(&#120812;)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) = abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L17</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_ord_is_refl</span><span> </span><span>refl_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L15F</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span>A3</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_abs_nonneg</span><span> </span><span>Int_ZF_2_L15F</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If the homomorphism difference is bounded on &#8249;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&#215;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&#8250;, 
  then it is bounded on &#8249;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&#215;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&#8250;.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L22</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>  </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. &#8704;b&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. abs(&#948;(f,a,b)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;M. &#8704;m&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. &#8704;n&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. abs(&#948;(f,m,n)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. &#8704;n&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. abs(&#948;(f,m,n)) \&lt;lsq&gt; L \&lt;ra&gt; abs(f`(&#120812;)) \&lt;ra&gt; abs(f`(&#120812;))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L20</span><span> </span><span>Int_ZF_2_1_L21</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;For odd functions we can do better than in &#8249;Int_ZF_2_1_L22&#8250;: 
  if the homomorphism 
  difference of $f$ is bounded on &#8249;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&#215;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&#8250;, then it is bounded 
  on &#8249;&#8484;&#215;&#8484;&#8250;, hence $f$ is a slope. 
  Loong prof by splitting the &#8249;&#8484;&#215;&#8484;&#8250; into six subsets.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L23</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>  </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. &#8704;b&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. abs(&#948;(f,a,b)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;x&#8712;&#8484;. (\&lt;rm&gt;f`(\&lt;rm&gt;x)) = f`(x)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*&quot;&#8707;M. &#8704;m&#8712;&#8484;. &#8704;n&#8712;&#8484;. abs(&#948;(f,m,n)) \&lt;lsq&gt; M&quot;*)</span></span></span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;M.&#8704;a&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. &#8704;b&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. abs(&#948;(f,a,b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_1_L22</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>M</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. &#8704;n&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>. abs(&#948;(f,m,n)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>a</span><span> </span><span>b</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;b&#8712;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;\&lt;lsq&gt;a &#8743; &#120812;\&lt;lsq&gt;b  &#8744;  a\&lt;lsq&gt;&#120812; &#8743; b\&lt;lsq&gt;&#120812;  &#8744;  
      a\&lt;lsq&gt;&#120812; &#8743; &#120812;\&lt;lsq&gt;b &#8743; &#120812; \&lt;lsq&gt; a\&lt;ra&gt;b  &#8744; a\&lt;lsq&gt;&#120812; &#8743; &#120812;\&lt;lsq&gt;b &#8743; a\&lt;ra&gt;b \&lt;lsq&gt; &#120812;  &#8744;  
      &#120812;\&lt;lsq&gt;a &#8743; b\&lt;lsq&gt;&#120812; &#8743; &#120812; \&lt;lsq&gt; a\&lt;ra&gt;b  &#8744;  &#120812;\&lt;lsq&gt;a &#8743; b\&lt;lsq&gt;&#120812; &#8743; a\&lt;ra&gt;b \&lt;lsq&gt; &#120812;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_plane_split_in6</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;\&lt;lsq&gt;a &#8743; &#120812;\&lt;lsq&gt;b&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;b&#8712;&#8484;<span class="hidden">&#8679;</span><sup>+</sup>&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L16</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) \&lt;lsq&gt; M&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a\&lt;lsq&gt;&#120812; &#8743; b\&lt;lsq&gt;&#120812;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;a,\&lt;rm&gt;b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L10A</span><span> </span><span>Int_ZF_2_L16</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A3</span><span> </span><span>A4</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L19</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a\&lt;lsq&gt;&#120812; &#8743; &#120812;\&lt;lsq&gt;b &#8743; &#120812; \&lt;lsq&gt; a\&lt;ra&gt;b&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;a,a\&lt;ra&gt;b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L10A</span><span> </span><span>Int_ZF_2_L16</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A3</span><span> </span><span>A4</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L19</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a\&lt;lsq&gt;&#120812; &#8743; &#120812;\&lt;lsq&gt;b &#8743; a\&lt;ra&gt;b \&lt;lsq&gt; &#120812;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,b,\&lt;rm&gt;(a\&lt;ra&gt;b))) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L10A</span><span> </span><span>Int_ZF_2_L16</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A3</span><span> </span><span>A4</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L19</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;\&lt;lsq&gt;a &#8743; b\&lt;lsq&gt;&#120812; &#8743; &#120812; \&lt;lsq&gt; a\&lt;ra&gt;b&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,\&lt;rm&gt;b,a\&lt;ra&gt;b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L10A</span><span> </span><span>Int_ZF_2_L16</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A3</span><span> </span><span>A4</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L19</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;\&lt;lsq&gt;a &#8743; b\&lt;lsq&gt;&#120812; &#8743; a\&lt;ra&gt;b \&lt;lsq&gt; &#120812;&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,\&lt;rm&gt;(a\&lt;ra&gt;b))) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L10A</span><span> </span><span>Int_ZF_2_L16</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A3</span><span> </span><span>A4</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L19</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) \&lt;lsq&gt; M&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> </span><span class="keyword1"><span class="command">}</span></span><span> 
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;. &#8704;n&#8712;&#8484;. abs(&#948;(f,m,n)) \&lt;lsq&gt; M&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_1_L5</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If the homomorphism difference of a function defined 
  on positive integers is bounded, then the odd extension
  of this function is a slope.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L24</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. &#8704;b&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. abs(&#948;(f,a,b)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;OddExtension(&#8484;,IntegerAddition,IntegerOrder,f) &#8712; &#119982;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?g</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;OddExtension(&#8484;,IntegerAddition,IntegerOrder,f)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?g : &#8484;&#8594;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_5_L10</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. &#8704;b&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. abs(&#948;(?g,a,b)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>a</span><span> </span><span>b</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;b&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) =  abs(&#948;(?g,a,b))&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>pos_int_closed_add_unfolded</span><span> </span><span>Int_ZF_1_5_L11</span><span> 
</span><span>	</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A2</span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,a,b)) \&lt;lsq&gt; L&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(?g,a,b)) \&lt;lsq&gt; L&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">}</span></span><span> </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;x&#8712;&#8484;. (\&lt;rm&gt;?g`(\&lt;rm&gt;x)) = ?g`(x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_oddext_is_odd_alt</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?g &#8712; &#119982;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_1_L23</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Type information related to $\gamma$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L25</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,n,\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;&#948;(f,n,\&lt;rm&gt;n)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(f,m,n)  &#8712; &#8484;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>T1</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_2_1_L3B</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>apply_funtype</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,n,\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L3B</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;&#948;(f,n,\&lt;rm&gt;n)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T1</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(f,m,n)  &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span> 
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;A couple of formulae involving $f(m-n)$ and $\gamma(f,m,n)$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L26</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) = &#947;(f,m,n) \&lt;ra&gt; f`(m) \&lt;rs&gt; f`(n)&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) = &#947;(f,m,n) \&lt;ra&gt; (f`(m) \&lt;rs&gt; f`(n))&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) \&lt;ra&gt; (f`(n) \&lt;rs&gt; &#947;(f,m,n)) = f`(m)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;f`(n)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;&#948;(f,n,\&lt;rm&gt;n)) &#8712; &#8484;&quot;</span></span></span><span>  
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;&#948;(f,n,\&lt;rm&gt;n))  \&lt;ra&gt; f`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(f,m,n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span>  </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_2_1_L25</span><span> </span><span>apply_funtype</span><span> </span><span>Int_ZF_1_1_L5</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>   </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) = 
    &#948;(f,m,\&lt;rm&gt;n) \&lt;ra&gt; ((\&lt;rm&gt;&#948;(f,n,\&lt;rm&gt;n)) \&lt;ra&gt; f`(&#120812;) \&lt;rs&gt; f`(n)) \&lt;ra&gt; f`(m)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L3C</span><span> </span><span>Int_ZF_2_1_L14A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) =
    &#948;(f,m,\&lt;rm&gt;n) \&lt;ra&gt; ((\&lt;rm&gt;&#948;(f,n,\&lt;rm&gt;n)) \&lt;ra&gt; f`(&#120812;)) \&lt;ra&gt; f`(m) \&lt;rs&gt; f`(n)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L16</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,m,\&lt;rm&gt;n) \&lt;ra&gt; ((\&lt;rm&gt;&#948;(f,n,\&lt;rm&gt;n)) \&lt;ra&gt; f`(&#120812;)) = &#947;(f,m,n)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L7</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) = &#947;(f,m,n) \&lt;ra&gt; f`(m) \&lt;rs&gt; f`(n)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) \&lt;ra&gt; (f`(n) \&lt;rs&gt; &#947;(f,m,n)) = 
    (&#947;(f,m,n) \&lt;ra&gt; f`(m) \&lt;rs&gt; f`(n)) \&lt;ra&gt; (f`(n) \&lt;rs&gt; &#947;(f,m,n))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8230; = f`(m)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L18</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) \&lt;ra&gt; (f`(n) \&lt;rs&gt; &#947;(f,m,n)) = f`(m)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(f,m,n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;f`(n)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(f,m,n) \&lt;ra&gt; f`(m) \&lt;ra&gt; (\&lt;rm&gt;f`(n)) =  &#947;(f,m,n) \&lt;ra&gt; (f`(m) \&lt;ra&gt; (\&lt;rm&gt;f`(n)))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_1_1_L7</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) = &#947;(f,m,n) \&lt;ra&gt; (f`(m) \&lt;rs&gt; f`(n))&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;A formula expressing the difference between $f(m-n-k)$ and
  $f(m)-f(n)-f(k)$ in terms of $\gamma$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L26A</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;k&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;rs&gt; (f`(m)\&lt;rs&gt; f`(n) \&lt;rs&gt; f`(k)) = &#947;(f,m\&lt;rs&gt;n,k) \&lt;ra&gt; &#947;(f,m,n)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span>T</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m\&lt;rs&gt;n &#8712; &#8484;&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(f,m\&lt;rs&gt;n,k) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) \&lt;rs&gt; f`(n) \&lt;rs&gt; f`(k) &#8712; &#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>    </span><span>T1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(f,m,n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m) \&lt;rs&gt; f`(n) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;f`(k)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>Int_ZF_2_1_L25</span><span> </span><span>apply_funtype</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) \&lt;rs&gt; f`(k) = &#947;(f,m,n) \&lt;ra&gt; (f`(m) \&lt;rs&gt; f`(n)) \&lt;ra&gt; (\&lt;rm&gt;f`(k))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L26</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8230; = &#947;(f,m,n) \&lt;ra&gt; (f`(m) \&lt;rs&gt; f`(n) \&lt;ra&gt; (\&lt;rm&gt;f`(k)))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_1_1_L7</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n) \&lt;rs&gt; f`(k) = &#947;(f,m,n) \&lt;ra&gt; (f`(m) \&lt;rs&gt; f`(n) \&lt;rs&gt; f`(k))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n\&lt;rs&gt;k) =  &#947;(f,m\&lt;rs&gt;n,k) \&lt;ra&gt; (f`(m\&lt;rs&gt;n)\&lt;rs&gt;f`(k))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L26</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;rs&gt; (f`(m)\&lt;rs&gt; f`(n) \&lt;rs&gt; f`(k)) = 
    &#947;(f,m\&lt;rs&gt;n,k) \&lt;ra&gt; ( &#947;(f,m,n) \&lt;ra&gt; (f`(m) \&lt;rs&gt; f`(n) \&lt;rs&gt; f`(k))) 
    \&lt;rs&gt; (f`(m)\&lt;rs&gt; f`(n) \&lt;rs&gt; f`(k))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span>T1</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L17</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $s$ is a slope, then $\gamma (s,m,n)$ is uniformly bounded.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L27</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;L&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;. abs(&#947;(s,m,n)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?L</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(s) \&lt;ra&gt; max&#948;(s) \&lt;ra&gt; abs(s`(&#120812;))&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(s) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;?L &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L8</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_2_1_L2B</span><span> 
</span><span>      </span><span>Int_ZF_2_L14</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>m</span><span> 
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>n</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(s,m,\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(s,n,\&lt;rm&gt;n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;&#948;(s,n,\&lt;rm&gt;n)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120812;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_2_1_L25</span><span> </span><span>Int_ZF_2_L14</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(s,m,\&lt;rm&gt;n) \&lt;rs&gt; &#948;(s,n,\&lt;rm&gt;n) \&lt;ra&gt; s`(&#120812;)) \&lt;lsq&gt;
      abs(&#948;(s,m,\&lt;rm&gt;n)) \&lt;ra&gt; abs(\&lt;rm&gt;&#948;(s,n,\&lt;rm&gt;n)) \&lt;ra&gt; abs(s`(&#120812;))&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_triangle_ineq3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(s,m,\&lt;rm&gt;n)) \&lt;ra&gt; abs(\&lt;rm&gt;&#948;(s,n,\&lt;rm&gt;n)) \&lt;ra&gt; abs(s`(&#120812;)) \&lt;lsq&gt; ?L&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L7</span><span> </span><span>int_ineq_add_sides</span><span> </span><span>int_ord_transl_inv</span><span> </span><span>Int_ZF_2_L17</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>   </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(s,m,\&lt;rm&gt;n) \&lt;rs&gt; &#948;(s,n,\&lt;rm&gt;n) \&lt;ra&gt; s`(&#120812;)) \&lt;lsq&gt; ?L&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>    
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#947;(s,m,n)) \&lt;lsq&gt; ?L&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;L&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;. abs(&#947;(s,m,n)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $s$ is a slope, then $s(m) \leq s(m-1) + M$, where $L$ does not depend
  on $m$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L28</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;M&#8712;&#8484;. &#8704;m&#8712;&#8484;. s`(m) \&lt;lsq&gt; s`(m\&lt;rs&gt;&#120813;) \&lt;ra&gt; M&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;L&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.abs(&#947;(s,m,n)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L27</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>L</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;L&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.abs(&#947;(s,m,n)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L27</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;.abs(&#947;(s,m,&#120813;)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?M</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120813;) \&lt;ra&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?M &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_1_1_L5</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>m</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span>T1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s:&#8484;&#8594;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#120813;&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>      </span><span>T2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(s,m,&#120813;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s`(&#120813;) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>AlmostHoms_def</span><span> 
</span><span>	</span><span>Int_ZF_2_1_L25</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A2</span><span> </span><span>T1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m\&lt;rs&gt;&#120813;) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>apply_funtype</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>I</span><span> </span><span>A2</span><span> </span><span>T2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;&#947;(s,m,&#120813;)) \&lt;lsq&gt; abs(&#947;(s,m,&#120813;))&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#947;(s,m,&#120813;)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L19C</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;&#947;(s,m,&#120813;)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T2</span><span> </span><span>T3</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m\&lt;rs&gt;&#120813;) \&lt;ra&gt; (s`(&#120813;) \&lt;rs&gt; &#947;(s,m,&#120813;)) \&lt;lsq&gt; s`(m\&lt;rs&gt;&#120813;) \&lt;ra&gt; ?M&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_ord_transl_inv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m\&lt;rs&gt;&#120813;) \&lt;ra&gt; (s`(&#120813;) \&lt;rs&gt; &#947;(s,m,&#120813;)) = s`(m)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_1_L26</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m) \&lt;lsq&gt; s`(m\&lt;rs&gt;&#120813;) \&lt;ra&gt; ?M&quot;</span></span></span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;M&#8712;&#8484;. &#8704;m&#8712;&#8484;. s`(m) \&lt;lsq&gt; s`(m\&lt;rs&gt;&#120813;) \&lt;ra&gt; M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $s$ is a slope, then the difference between 
  $s(m-n-k)$ and $s(m)-s(n)-s(k)$ is uniformly bounded.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L29</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;M&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. abs(s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;rs&gt; (s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k))) \&lt;lsq&gt;M&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;L&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;. abs(&#947;(s,m,n)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L27</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>L</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;L&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> 
</span><span>    </span><span>II</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;. abs(&#947;(s,m,n)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;L\&lt;ra&gt;L &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>m</span><span> </span><span>n</span><span> </span><span>k</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;k&#8712;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;m\&lt;rs&gt;n &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(s,m\&lt;rs&gt;n,k) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#947;(s,m,n) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_2_1_L25</span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#947;(s,m\&lt;rs&gt;n,k) \&lt;ra&gt; &#947;(s,m,n)) \&lt;lsq&gt; abs(&#947;(s,m\&lt;rs&gt;n,k)) \&lt;ra&gt; abs(&#947;(s,m,n))&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_triangle_ineq</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>II</span><span> </span><span>A2</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#947;(s,m\&lt;rs&gt;n,k)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#947;(s,m,n)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#947;(s,m\&lt;rs&gt;n,k)) \&lt;ra&gt; abs(&#947;(s,m,n)) \&lt;lsq&gt; L\&lt;ra&gt;L&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_ineq_add_sides</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#947;(s,m\&lt;rs&gt;n,k) \&lt;ra&gt; &#947;(s,m,n)) \&lt;lsq&gt; L\&lt;ra&gt;L&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;rs&gt; (s`(m)\&lt;rs&gt; s`(n) \&lt;rs&gt; s`(k)) = &#947;(s,m\&lt;rs&gt;n,k) \&lt;ra&gt; &#947;(s,m,n)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_2_1_L26A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;rs&gt; (s`(m)\&lt;rs&gt; s`(n) \&lt;rs&gt; s`(k))) \&lt;lsq&gt; L\&lt;ra&gt;L&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $s$ is a slope, then we can find integers $M,K$ such that
  $s(m-n-k) \leq s(m)-s(n)-s(k) + M$ and $s(m)-s(n)-s(k) + K \leq s(m-n-k)$, 
  for all integer $m,n,k$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L30</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;M&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;lsq&gt; s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k)\&lt;ra&gt;M&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;K&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k)\&lt;ra&gt;K \&lt;lsq&gt; s`(m\&lt;rs&gt;n\&lt;rs&gt;k)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;M&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. abs(s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;rs&gt; (s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k))) \&lt;lsq&gt;M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L29</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>M</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;M&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>II</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. abs(s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;rs&gt; (s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k))) \&lt;lsq&gt;M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>III</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;M) &#8712; &#8484;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>m</span><span> </span><span>n</span><span> </span><span>k</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;n&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;k&#8712;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m\&lt;rs&gt;n\&lt;rs&gt;k) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>II</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;rs&gt; (s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k))) \&lt;lsq&gt;M&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;lsq&gt; s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k)\&lt;ra&gt;M &#8743; 
      s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k) \&lt;rs&gt; M \&lt;lsq&gt; s`(m\&lt;rs&gt;n\&lt;rs&gt;k)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_triangle_ineq2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span> </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;lsq&gt; s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k)\&lt;ra&gt;M&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k) \&lt;rs&gt; M \&lt;lsq&gt; s`(m\&lt;rs&gt;n\&lt;rs&gt;k)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span>III</span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;M&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. s`(m\&lt;rs&gt;n\&lt;rs&gt;k) \&lt;lsq&gt; s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k)\&lt;ra&gt;M&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;K&#8712;&#8484;. &#8704;m&#8712;&#8484;.&#8704;n&#8712;&#8484;.&#8704;k&#8712;&#8484;. s`(m)\&lt;rs&gt;s`(n)\&lt;rs&gt;s`(k)\&lt;ra&gt;K \&lt;lsq&gt; s`(m\&lt;rs&gt;n\&lt;rs&gt;k)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;By definition functions $f,g$ are almost equal if $f-g$* is bounded. 
  In the next lemma we show it is sufficient to check the boundedness on positive
  integers.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L31</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?a</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120812;) \&lt;rs&gt; r`(&#120812;))&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?c</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120814;&#8901;max&#948;(s) \&lt;ra&gt; &#120814;&#8901;max&#948;(r) \&lt;ra&gt; L&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?M</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Maximum(IntegerOrder,{?a,L,?c})&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(&#120813;)\&lt;rs&gt;r`(&#120813;)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_one_two_are_pos</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;L&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L1A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?a &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_2_1_L2B</span><span> 
</span><span>      </span><span>Int_ZF_1_1_L5</span><span> </span><span>Int_ZF_2_L14</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?c &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L8</span><span> </span><span>int_two_three_are_int</span><span> </span><span>Int_ZF_1_1_L5</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?a \&lt;lsq&gt; ?M&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>    </span><span>II</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;L \&lt;lsq&gt; ?M&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> 
</span><span>    </span><span>III</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?c \&lt;lsq&gt; ?M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_4_L1A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>m</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r`(m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s`(m) \&lt;rs&gt; r`(m) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;s`(\&lt;rm&gt;m) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r`(\&lt;rm&gt;m) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_1_1_L5</span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A5</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m=&#120812; &#8744; m&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub> &#8744; (\&lt;rm&gt;m) &#8712; &#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_decomp_cases</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m=&#120812;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m) \&lt;rs&gt; r`(m)) \&lt;lsq&gt; ?M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;m&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span>II</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; L&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;L\&lt;lsq&gt;?M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; ?M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(\&lt;rm&gt;m) &#8712; &#8484;<span class="hidden">&#8681;</span><sub>+</sub>&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; 
	abs(s`(m)\&lt;ra&gt;s`(\&lt;rm&gt;m)) \&lt;ra&gt; abs(r`(m)\&lt;ra&gt;r`(\&lt;rm&gt;m)) \&lt;ra&gt; abs(s`(\&lt;rm&gt;m)\&lt;rs&gt;r`(\&lt;rm&gt;m))&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_3_L22A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>III</span><span> </span><span>A5</span><span> </span><span>A6</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)\&lt;ra&gt;s`(\&lt;rm&gt;m)) \&lt;ra&gt; abs(r`(m)\&lt;ra&gt;r`(\&lt;rm&gt;m)) \&lt;ra&gt; abs(s`(\&lt;rm&gt;m)\&lt;rs&gt;r`(\&lt;rm&gt;m)) \&lt;lsq&gt; ?c&quot;</span></span></span><span>
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;?c \&lt;lsq&gt; ?M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L14</span><span> </span><span>int_ineq_add_sides</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)\&lt;ra&gt;s`(\&lt;rm&gt;m)) \&lt;ra&gt; abs(r`(m)\&lt;ra&gt;r`(\&lt;rm&gt;m)) \&lt;ra&gt; abs(s`(\&lt;rm&gt;m)\&lt;rs&gt;r`(\&lt;rm&gt;m)) \&lt;lsq&gt; ?M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; ?M&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(s`(m) \&lt;rs&gt; r`(m)) \&lt;lsq&gt; ?M&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span> </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;. abs(s`(m)\&lt;rs&gt;r`(m)) \&lt;lsq&gt; ?M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_1_L9</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;A sufficient condition for an odd slope to be almost equal to identity:
  If for all positive integers the value of the slope at $m$ is between $m$ and
  $m$ plus some constant independent of $m$, then the slope is almost identity.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L32</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;M&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. m \&lt;lsq&gt; s`(m) &#8743; s`(m) \&lt;lsq&gt; m\&lt;ra&gt;M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; id(&#8484;)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?r</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;id(&#8484;)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;?r &#8712; &#119982;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L17</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;<span class="hidden">&#8681;</span><sub>+</sub>. abs(s`(m)\&lt;rs&gt;?r`(m)) \&lt;lsq&gt; M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_3_L23</span><span> </span><span>PositiveSet_def</span><span> </span><span>id_conv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; id(&#8484;)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_1_L31</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;A lemma about adding a constant to slopes. This is actually proven in
  &#8249;Group_ZF_3_5_L1&#8250;, in &#8249;Group_ZF_3.thy&#8250; here we just refer to 
  that lemma to show it in notation used for integers. Unfortunately we have
  to use raw set notation in the proof.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_1_L33</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;c&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> 
</span><span>  </span><span>A3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;r = {&#10216;m,s`(m)\&lt;ra&gt;c&#10217;. m&#8712;&#8484;}&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;. r`(m) = s`(m)\&lt;ra&gt;c&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?G</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?f</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;IntegerAddition&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?AH</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;AlmostHoms(?G, ?f)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>I</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;group1(?G, ?f)&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8712; AlmostHoms(?G, ?f)&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;c &#8712; ?G&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;r = {&#10216;x, ?f`&#10216;s`(x), c&#10217;&#10217;. x &#8712; ?G}&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;x&#8712;?G. r`(x) = ?f`&#10216;s`(x),c&#10217;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>group1.Group_ZF_3_5_L1</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;r &#8712; AlmostHoms(?G, ?f)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>group1.Group_ZF_3_5_L1</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>I</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#10216;s, r&#10217; &#8712; QuotientGroupRel(AlmostHoms(?G, ?f), AlHomOp1(?G, ?f), FinRangeFunctions(?G, ?G))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>group1.Group_ZF_3_5_L1</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;m&#8712;&#8484;. r`(m) = s`(m)\&lt;ra&gt;c&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;r&#8712;&#119982;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; r&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>  
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Composing slopes&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Composition of slopes is not commutative. However, as we show in this 
  section if $f$ and $g$ are slopes then the range of $f\circ g - g\circ f$ 
  is bounded. This allows to show that the multiplication of real 
  numbers is commutative.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Two useful estimates.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_2_L1</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f:&#8484;&#8594;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;ra&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;ra&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; abs(&#948;(f,p&#8901;q,q))\&lt;ra&gt;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))&quot;</span></span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;rs&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; abs(&#948;(f,(p\&lt;rs&gt;&#120813;)&#8901;q,q))\&lt;ra&gt;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?R</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?A</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;IntegerAddition&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?M</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;IntegerMultiplication&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?I</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;GroupInv(?R, ?A)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?a</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`((p\&lt;ra&gt;&#120813;)&#8901;q)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?b</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?c</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(q)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?d</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(p&#8901;q)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T1</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;ring0(?R, ?A, ?M)&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;?a &#8712; ?R&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;?b &#8712; ?R&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;?c &#8712; ?R&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;?d &#8712; ?R&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span>  </span><span>Int_ZF_1_1_L2</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>apply_funtype</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;?A`&#10216;?a,?I`(?M`&#10216;?A`&#10216;?b, TheNeutralElement(?R, ?M)&#10217;,?c&#10217;)&#10217; =
    ?A`&#10216;?A`&#10216;?A`&#10216;?a,?I`(?d)&#10217;,?I`(?c)&#10217;,?A`&#10216;?d, ?I`(?M`&#10216;?b, ?c&#10217;)&#10217;&#10217;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ring0.Ring_ZF_2_L2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`((p\&lt;ra&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;ra&gt;&#120813;)&#8901;f`(q) = &#948;(f,p&#8901;q,q)\&lt;ra&gt;(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_1_1_L1</span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>T1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,p&#8901;q,q) &#8712; &#8484;&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>apply_funtype</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;ra&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;ra&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; abs(&#948;(f,p&#8901;q,q))\&lt;ra&gt;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_triangle_ineq</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T1</span><span class="delimiter">:</span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`((p\&lt;rs&gt;&#120813;)&#8901;q) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(q) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;f`(p&#8901;q) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>apply_funtype</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;rs&gt;&#120813;)&#8901;f`(q) = (f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))\&lt;rs&gt;(f`(p&#8901;q)\&lt;rs&gt;f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;f`(q))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_1_2_L6</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;rs&gt;&#120813;)&#8901;f`(q) = (f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))\&lt;rs&gt;&#948;(f,(p\&lt;rs&gt;&#120813;)&#8901;q,q)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L7</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q) &#8712; &#8484;&quot;</span></span></span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;&#948;(f,(p\&lt;rs&gt;&#120813;)&#8901;q,q) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>apply_funtype</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;rs&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; abs(&#948;(f,(p\&lt;rs&gt;&#120813;)&#8901;q,q))\&lt;ra&gt;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_triangle_ineq1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $f$ is a slope, then 
  $|f(p\cdot q)-p\cdot f(q)|\leq (|p|+1)\cdot$&#8249;max&#948;(f)&#8250;. 
  The proof is by induction on $p$ and the next lemma is the induction step for the case when $0\leq p$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_2_L2</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;\&lt;lsq&gt;p&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;ra&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;ra&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; (abs(p\&lt;ra&gt;&#120813;)\&lt;ra&gt; &#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8901;q &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L1A</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,p&#8901;q,q)) \&lt;lsq&gt; max&#948;(f)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_1_L7</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>A3</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;ra&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;ra&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; abs(&#948;(f,p&#8901;q,q))\&lt;ra&gt;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_2_L1A</span><span> </span><span>Int_ZF_2_2_L1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;ra&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;ra&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; max&#948;(f)\&lt;ra&gt;(abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_L15</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>I</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(f)\&lt;ra&gt;(abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f) = (abs(p\&lt;ra&gt;&#120813;)\&lt;ra&gt; &#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L1A</span><span> </span><span>Int_ZF_1_2_L2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;ra&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;ra&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; (abs(p\&lt;ra&gt;&#120813;)\&lt;ra&gt; &#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $f$ is a slope, then 
  $|f(p\cdot q)-p\cdot f(q)|\leq (|p|+1)\cdot$&#8249;max&#948;&#8250;. 
  The proof is by induction on $p$ and the next lemma is the induction step for the case when $p\leq 0$.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_2_L3</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p\&lt;lsq&gt;&#120812;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;rs&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; (abs(p\&lt;rs&gt;&#120813;)\&lt;ra&gt; &#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(p\&lt;rs&gt;&#120813;)&#8901;q &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L1A</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>I</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#948;(f,(p\&lt;rs&gt;&#120813;)&#8901;q,q)) \&lt;lsq&gt; max&#948;(f)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_1_L7</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>A3</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;rs&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; abs(&#948;(f,(p\&lt;rs&gt;&#120813;)&#8901;q,q))\&lt;ra&gt;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>AlmostHoms_def</span><span> </span><span>Int_ZF_2_L1A</span><span> </span><span>Int_ZF_2_2_L1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;rs&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; max&#948;(f)\&lt;ra&gt;(abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_2_L15</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>I</span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L1A</span><span> </span><span>Int_ZF_1_2_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $f$ is a slope, then 
  $|f(p\cdot q)-p\cdot f(q)|\leq (|p|+1)\cdot$&#8249;max&#948;&#8250;$(f)$.
  Proof by cases on $0 \leq p$.&#8250;</span></span></span><span> 
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Int_ZF_2_2_L4</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8712;&#8484;&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;\&lt;lsq&gt;p&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(&#120812;&#8901;q)\&lt;rs&gt;&#120812;&#8901;f`(q)) \&lt;lsq&gt; (abs(&#120812;)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_1_1_L4</span><span> 
</span><span>	</span><span>Int_ZF_2_1_L8</span><span> </span><span>Int_ZF_2_L18</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;p. &#120812;\&lt;lsq&gt;p &#8743; abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f) &#10230;
      abs(f`((p\&lt;ra&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;ra&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; (abs(p\&lt;ra&gt;&#120813;)\&lt;ra&gt; &#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_2_L2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Induction_on_int</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#172;(&#120812;\&lt;lsq&gt;p)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p\&lt;lsq&gt;&#120812;&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L19A</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(&#120812;&#8901;q)\&lt;rs&gt;&#120812;&#8901;f`(q)) \&lt;lsq&gt; (abs(&#120812;)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_1_1_L4</span><span>
</span><span>	</span><span>Int_ZF_2_1_L8</span><span> </span><span>Int_ZF_2_L18</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;p. p\&lt;lsq&gt;&#120812; &#8743; abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f) &#10230;
      abs(f`((p\&lt;rs&gt;&#120813;)&#8901;q)\&lt;rs&gt;(p\&lt;rs&gt;&#120813;)&#8901;f`(q)) \&lt;lsq&gt; (abs(p\&lt;rs&gt;&#120813;)\&lt;ra&gt; &#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_2_L3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Back_induct_on_int</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;The next elegant result is Lemma 7 in the Arthan&#39;s paper \cite{Arthan2004}.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Arthan_Lem_7</span><span class="delimiter">:</span><span> 
</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8712;&#8484;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(q&#8901;f`(p)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;abs(q)\&lt;ra&gt;&#120814;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8901;f`(p)\&lt;rs&gt;f`(p&#8901;q) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;f`(q&#8901;p) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(p&#8901;q) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;q&#8901;f`(p) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8901;f`(q) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(f) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(q) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(p) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_2_1_L7</span><span> </span><span>Int_ZF_2_L14</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(q&#8901;f`(p)\&lt;rs&gt;f`(p&#8901;q)) \&lt;lsq&gt; (abs(q)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(q&#8901;p)\&lt;rs&gt;q&#8901;f`(p)) \&lt;lsq&gt; (abs(q)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_2_L4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span>A2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L20</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_2_L4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;abs(q&#8901;f`(p)\&lt;rs&gt;f`(p&#8901;q)\&lt;ra&gt;(f`(p&#8901;q)\&lt;rs&gt;p&#8901;f`(q))) \&lt;lsq&gt; (abs(q)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)\&lt;ra&gt;(abs(p)\&lt;ra&gt;&#120813;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L21</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L9</span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_1_2_L10</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;This is Lemma 8 in the Arthan&#39;s paper.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Arthan_Lem_8</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;A B. A&#8712;&#8484; &#8743; B&#8712;&#8484; &#8743; (&#8704;p&#8712;&#8484;. abs(f`(p)) \&lt;lsq&gt; A&#8901;abs(p)\&lt;ra&gt;B)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?A</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(f) \&lt;ra&gt; abs(f`(&#120813;))&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?B</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120815;&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?A&#8712;&#8484;&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?B&#8712;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>Int_ZF_2_1_L2B</span><span> 
</span><span>      </span><span>Int_ZF_2_1_L7</span><span> </span><span>Int_ZF_2_L14</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;p&#8712;&#8484;. abs(f`(p)) \&lt;lsq&gt; ?A&#8901;abs(p)\&lt;ra&gt;?B&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>p</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8712;&#8484;&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T</span><span class="delimiter">:</span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;f`(p) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(p) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(&#120813;) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8901;f`(&#120813;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#120815;&#8712;&#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(f) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_2_L14</span><span> </span><span>int_zero_one_are_int</span><span> 
</span><span>	</span><span>Int_ZF_1_1_L5</span><span> </span><span>Int_ZF_2_1_L7</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(&#120813;&#8901;f`(p)\&lt;rs&gt;p&#8901;f`(&#120813;)) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;abs(&#120813;)\&lt;ra&gt;&#120814;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>Arthan_Lem_7</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>T</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(p)) \&lt;lsq&gt; abs(p&#8901;f`(&#120813;))\&lt;ra&gt;(abs(p)\&lt;ra&gt;&#120815;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L16A</span><span> </span><span>Int_ZF_1_1_L4</span><span> </span><span>Int_ZF_1_2_L11</span><span> 
</span><span>	</span><span>Int_triangle_ineq2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span>T</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(p)) \&lt;lsq&gt; ?A&#8901;abs(p)\&lt;ra&gt;?B&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_3_L14</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;If $f$ and $g$ are slopes, then $f\circ g$ is equivalent 
  (almost equal) to $g\circ f$. This is Theorem 9 in Arthan&#39;s paper \cite{Arthan2004}.&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>int1</span><span class="delimiter">)</span><span> </span><span>Arthan_Th_9</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8712;&#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;g&#8712;&#119982;&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8728;g &#8764; g&#8728;f&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>   </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;A B. A&#8712;&#8484; &#8743; B&#8712;&#8484; &#8743; (&#8704;p&#8712;&#8484;. abs(f`(p)) \&lt;lsq&gt; A&#8901;abs(p)\&lt;ra&gt;B)&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;C D. C&#8712;&#8484; &#8743; D&#8712;&#8484; &#8743; (&#8704;p&#8712;&#8484;. abs(g`(p)) \&lt;lsq&gt; C&#8901;abs(p)\&lt;ra&gt;D)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Arthan_Lem_8</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>A</span><span> </span><span>B</span><span> </span><span>C</span><span> </span><span>D</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>D1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;A&#8712;&#8484;&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;B&#8712;&#8484;&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;C&#8712;&#8484;&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;D&#8712;&#8484;&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>D2</span><span class="delimiter">:</span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;p&#8712;&#8484;. abs(f`(p)) \&lt;lsq&gt; A&#8901;abs(p)\&lt;ra&gt;B&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;p&#8712;&#8484;. abs(g`(p)) \&lt;lsq&gt; C&#8901;abs(p)\&lt;ra&gt;D&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?E</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(g)&#8901;(A\&lt;ra&gt;&#120813;) \&lt;ra&gt; max&#948;(f)&#8901;(C\&lt;ra&gt;&#120813;)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?F</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(B&#8901;max&#948;(g) \&lt;ra&gt; &#120814;&#8901;max&#948;(g)) \&lt;ra&gt; (D&#8901;max&#948;(f) \&lt;ra&gt; &#120814;&#8901;max&#948;(f))&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>p</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8712;&#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>T1</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;g`(p) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(p) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;abs(p) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#120814; &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;f`(g`(p)) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;g`(f`(p)) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;f`(g`(p)) \&lt;rs&gt; g`(f`(p)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8901;f`(g`(p)) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;p&#8901;g`(f`(p)) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(g`(p))\&lt;rs&gt;g`(f`(p))) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L2B</span><span> </span><span>Int_ZF_2_1_L10</span><span> </span><span>Int_ZF_1_1_L5</span><span> </span><span>Int_ZF_2_L14</span><span> </span><span>int_two_three_are_int</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs((f`(g`(p))\&lt;rs&gt;g`(f`(p)))&#8901;p) \&lt;lsq&gt; 
      (abs(p)\&lt;ra&gt;abs(f`(p))\&lt;ra&gt;&#120814;)&#8901;max&#948;(g) \&lt;ra&gt; (abs(p)\&lt;ra&gt;abs(g`(p))\&lt;ra&gt;&#120814;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Arthan_Lem_7</span><span> </span><span>Int_ZF_1_2_L10A</span><span> </span><span>Int_ZF_1_2_L12</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;(abs(p)\&lt;ra&gt;abs(f`(p))\&lt;ra&gt;&#120814;)&#8901;max&#948;(g) \&lt;ra&gt; (abs(p)\&lt;ra&gt;abs(g`(p))\&lt;ra&gt;&#120814;)&#8901;max&#948;(f) \&lt;lsq&gt;
      ((max&#948;(g)&#8901;(A\&lt;ra&gt;&#120813;) \&lt;ra&gt; max&#948;(f)&#8901;(C\&lt;ra&gt;&#120813;)))&#8901;abs(p) \&lt;ra&gt;
      ((B&#8901;max&#948;(g) \&lt;ra&gt; &#120814;&#8901;max&#948;(g)) \&lt;ra&gt; (D&#8901;max&#948;(f) \&lt;ra&gt; &#120814;&#8901;max&#948;(f)))&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>D2</span><span> </span><span>A2</span><span> </span><span>T1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;abs(p)\&lt;ra&gt;abs(f`(p))\&lt;ra&gt;&#120814; \&lt;lsq&gt; abs(p)\&lt;ra&gt;(A&#8901;abs(p)\&lt;ra&gt;B)\&lt;ra&gt;&#120814;&quot;</span></span></span><span>
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;abs(p)\&lt;ra&gt;abs(g`(p))\&lt;ra&gt;&#120814; \&lt;lsq&gt; abs(p)\&lt;ra&gt;(C&#8901;abs(p)\&lt;ra&gt;D)\&lt;ra&gt;&#120814;&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L15C</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;(abs(p)\&lt;ra&gt;abs(f`(p))\&lt;ra&gt;&#120814;)&#8901;max&#948;(g) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;(A&#8901;abs(p)\&lt;ra&gt;B)\&lt;ra&gt;&#120814;)&#8901;max&#948;(g)&quot;</span></span></span><span>
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;(abs(p)\&lt;ra&gt;abs(g`(p))\&lt;ra&gt;&#120814;)&#8901;max&#948;(f) \&lt;lsq&gt; (abs(p)\&lt;ra&gt;(C&#8901;abs(p)\&lt;ra&gt;D)\&lt;ra&gt;&#120814;)&#8901;max&#948;(f)&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L8</span><span> </span><span>Int_ZF_1_3_L13</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>D1</span><span> </span><span>T1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;(abs(p)\&lt;ra&gt;(A&#8901;abs(p)\&lt;ra&gt;B)\&lt;ra&gt;&#120814;)&#8901;max&#948;(g) = 
	max&#948;(g)&#8901;(A\&lt;ra&gt;&#120813;)&#8901;abs(p) \&lt;ra&gt; (B&#8901;max&#948;(g) \&lt;ra&gt; &#120814;&#8901;max&#948;(g))&quot;</span></span></span><span>
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;(abs(p)\&lt;ra&gt;(C&#8901;abs(p)\&lt;ra&gt;D)\&lt;ra&gt;&#120814;)&#8901;max&#948;(f) = 
	max&#948;(f)&#8901;(C\&lt;ra&gt;&#120813;)&#8901;abs(p) \&lt;ra&gt; (D&#8901;max&#948;(f) \&lt;ra&gt; &#120814;&#8901;max&#948;(f))&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L8</span><span> </span><span>Int_ZF_1_2_L13</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;(abs(p)\&lt;ra&gt;abs(f`(p))\&lt;ra&gt;&#120814;)&#8901;max&#948;(g) \&lt;ra&gt; (abs(p)\&lt;ra&gt;abs(g`(p))\&lt;ra&gt;&#120814;)&#8901;max&#948;(f) \&lt;lsq&gt;
	(max&#948;(g)&#8901;(A\&lt;ra&gt;&#120813;)&#8901;abs(p) \&lt;ra&gt; (B&#8901;max&#948;(g) \&lt;ra&gt; &#120814;&#8901;max&#948;(g))) \&lt;ra&gt; 
	(max&#948;(f)&#8901;(C\&lt;ra&gt;&#120813;)&#8901;abs(p) \&lt;ra&gt; (D&#8901;max&#948;(f) \&lt;ra&gt; &#120814;&#8901;max&#948;(f)))&quot;</span></span></span><span>
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_ineq_add_sides</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>A2</span><span> </span><span>D1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abs(p) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(g)&#8901;(A\&lt;ra&gt;&#120813;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;B&#8901;max&#948;(g) \&lt;ra&gt; &#120814;&#8901;max&#948;(g) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>	</span><span class="string"><span class="delete"><span class="delete">&quot;max&#948;(f)&#8901;(C\&lt;ra&gt;&#120813;) &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;D&#8901;max&#948;(f) \&lt;ra&gt; &#120814;&#8901;max&#948;(f) &#8712; &#8484;&quot;</span></span></span><span> 
</span><span>	</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_L14</span><span> </span><span>Int_ZF_2_1_L8</span><span> </span><span>int_zero_one_are_int</span><span> 
</span><span>	  </span><span>Int_ZF_1_1_L5</span><span> </span><span>int_two_three_are_int</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_2_L14</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs((f`(g`(p))\&lt;rs&gt;g`(f`(p)))&#8901;p) \&lt;lsq&gt; ?E&#8901;abs(p) \&lt;ra&gt; ?F&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_order_transitive</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span>T1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(g`(p))\&lt;rs&gt;g`(f`(p)))&#8901;abs(p) \&lt;lsq&gt; ?E&#8901;abs(p) \&lt;ra&gt; ?F&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;abs(f`(g`(p))\&lt;rs&gt;g`(f`(p))) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_1_3_L5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span> </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> 
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;p&#8712;&#8484;. abs(f`(g`(p))\&lt;rs&gt;g`(f`(p))) &#8712; &#8484;&quot;</span></span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;p&#8712;&#8484;. abs(f`(g`(p))\&lt;rs&gt;g`(f`(p)))&#8901;abs(p) \&lt;lsq&gt; ?E&#8901;abs(p) \&lt;ra&gt; ?F&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span>D1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;?E &#8712; &#8484;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;?F &#8712; &#8484;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>int_zero_one_are_int</span><span> </span><span>int_two_three_are_int</span><span> </span><span>Int_ZF_2_1_L8</span><span> </span><span>Int_ZF_1_1_L5</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;L. &#8704;p&#8712;&#8484;. abs(f`(g`(p))\&lt;rs&gt;g`(f`(p))) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Int_ZF_1_7_L1</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A1</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>L</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;p&#8712;&#8484;. abs((f&#8728;g)`(p)\&lt;rs&gt;(g&#8728;f)`(p)) \&lt;lsq&gt; L&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L10</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8728;g &#8712; &#119982;&quot;</span></span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;g&#8728;f &#8712; &#119982;&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L11</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;f&#8728;g &#8764; g&#8728;f&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_ZF_2_1_L9</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span> 
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>

</div>
</body>
</html>
